<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
<head>
    <title></title>
</head>
<body>
<script type="text/javascript" src="../js/jquery-3.2.1.min.js"></script>
<script type="text/javascript" src="src/embedapi.js"></script>
<script type="text/javascript">
    var SAMPLE_SVG_STRING = '<svg width="580" height="400" xmlns="http://www.w3.org/2000/svg">\n' +
        ' <!-- Created with SVG Editor - http://github.com/mzalive/SVG Editor/ -->\n' +
        ' <g>\n' +
        '  <title>background</title>\n' +
        '  <rect fill="#fff" id="canvas_background" height="402" width="582" y="-1" x="-1"/>\n' +
        '  <g display="none" overflow="visible" y="0" x="0" height="100%" width="100%" id="canvasGrid">\n' +
        '   <rect fill="url(#gridpattern)" stroke-width="0" y="0" x="0" height="100%" width="100%"/>\n' +
        '  </g>\n' +
        ' </g>\n' +
        ' <g>\n' +
        '  <title>Layer 1</title>\n' +
        '  <path id="svg_1" d="m186.5825,162.04691l79.06753,0l24.43247,-73.71964l24.43249,73.71964l79.06751,0l-63.96685,45.56072l24.43374,73.71964l-63.96688,-45.56197l-63.96687,45.56197l24.43374,-73.71964l-63.96688,-45.56072z" stroke-width="1.5" stroke="#000" fill="#ff0000"/>\n' +
        ' </g>\n' +
        '</svg>'

    var SAMPLE_SVG_STRING2 = "<svg width="580" height="400" xmlns="http://www.w3…"1.5" stroke="#000" fill="#d65c5c"/>↵ </g>↵</svg>"

    var svgCanvas = null;

    var json_obj = [{"name": "item_1", "content": SAMPLE_SVG_STRING}, {"name": "item_2", "content": SAMPLE_SVG_STRING2}];

    function init_embed() {
          svgCanvas = new SvgEditorEmbedded(window.frames['svgEditor']);
    }



    function loadSvg() {
        var svg_name = $("#name").val();
        var svg_content = null;
        for(i in json_obj) {
            if(json_obj[i].name === svg_name) {
                svg_content = json_obj[i].content;
                break;
            }
        }
        svgCanvas.setSvgString(svg_content)(function (d, e) {
            alert(d, e)
        });
    }


    function saveSvg() {
        svgCanvas.getSvgString()(function handleSvgData(d, e) {
            if (e) {
                alert('error ' + e);
            }
            else {
                //json_obj.push({"name": $("#name").val(), "content": d});
                //console.log(json_obj);
                console.log('The exported SVG string:\n\n' + d);                
            }

        });
    }

<<<<<<< HEAD

</script>
<div class="svg-list"></div>
<iframe src="index.html" width="900px" height="600px" id="svgEditor" onload="init_embed()"></iframe>
=======
<iframe src="svg-editor/index.html" width="900px" height="600px" id="svgEditor" onload="init_embed()"></iframe>
>>>>>>> origin/email-editor
<br/>
<input id="name" name="name" type="text" placeholder="name">
<button onclick="loadSvg();">Load example</button>
<button onclick="saveSvg();">Save data</button>
<button onclick="checkSvg();">Check SVGS</button>
<br/>
</body>
</html>
